# Python 3.10+ 版本依赖
# 注意: 版本要求已调整为适配阿里云镜像源 (http://mirrors.cloud.aliyuncs.com/pypi/simple/)
# 如需最新版本，请使用官方 PyPI 源: pip install -r requirements.txt -i https://pypi.org/simple

# 核心框架
# 注意: chromadb 需要 fastapi>=0.95.2，因此移除上限约束
fastapi>=0.83.0
# 注意: chromadb 需要 uvicorn>=0.18.3，因此移除上限约束
uvicorn[standard]>=0.17.0
# 使用 Pydantic v1 (与现有代码保持一致)
# 代码中使用了 @validator 等 v1 API，如需升级到 v2 需要更新代码
pydantic>=1.9.2,<2.0.0
python-dotenv>=0.20.0
# 注意: chromadb 需要 requests>=2.28，因此移除上限约束
requests>=2.25.0

# LLM和LangChain
# 注意: langchain-openai 0.1.x 需要 openai>=1.26.0，因此必须使用 OpenAI 1.x
# OpenAI 1.x API 与 0.x 基本兼容（OpenAI/AsyncOpenAI 类可用）
openai>=1.26.0,<2.0.0
# 注意: langchain 0.3.0+ 需要 Pydantic v2，由于使用 Pydantic v1，需要降级 langchain
# langchain 0.2.x 支持 Pydantic v1，但可能功能较旧
# 如果必须使用 langchain 0.3.0+，需要升级到 Pydantic v2 并更新代码
langchain>=0.2.0,<0.3.0
langchain-openai>=0.1.10,<0.2.0
langchain-community>=0.0.1,<0.3.0
pandas>=2.0.0

# 向量数据库
# ChromaDB 0.5.x 可能有 API 变化，锁定 0.4.x 以保持兼容性
chromadb>=0.4.22,<0.5.0
sentence-transformers>=2.7.0
# 注意: pysqlite3-binary 用于替代系统sqlite3以支持ChromaDB
# 如果镜像源没有，可以尝试: pip install pysqlite3-binary --index-url https://pypi.org/simple
pysqlite3-binary>=0.5.0

# 数据库
PyMySQL>=1.1.0
# SQLAlchemy 2.x 有重大 API 变化，锁定 1.x 版本以保持兼容性
sqlalchemy>=1.4.0,<2.0.0
alembic>=1.8.0

# 文档处理
python-multipart>=0.0.9
pypdf>=3.0.0

# 依赖冲突修复
idna>=2.10
anyio>=3.0.0
sniffio>=1.3.0
# 修复 TensorFlow 与 protobuf 版本冲突
# TensorFlow 需要 protobuf <= 3.20.x
protobuf>=3.19.0,<=3.20.3

# 多模态功能依赖
# 语音识别和合成
openai-whisper>=20230314
pydub>=0.25.1
noisereduce>=2.0.0
librosa>=0.9.0
soundfile>=0.12.0

# 图像处理和分析
Pillow>=9.0.0
opencv-python>=4.5.0
deepface>=0.0.79
# 注意: face-recognition 需要 dlib，而 dlib 需要编译
# 编译 dlib 需要以下系统依赖（Alibaba Cloud Linux / CentOS）:
#   yum install -y python310-devel cmake gcc gcc-c++ make
# 或者如果不需要人脸识别功能，可以注释掉这一行
# 如果遇到 "Python.h: No such file or directory" 错误，请安装 python310-devel
face-recognition>=1.3.0
pytesseract>=0.3.10

# 阿里云SDK
aliyun-python-sdk-core>=2.15.0
# 注意: aliyun-python-sdk-nls-cloud-api 在镜像源中可能不可用，需要从官方 PyPI 安装
# aliyun-python-sdk-nls-cloud-api>=1.0.0
# 如果镜像源没有，可以尝试: pip3.10 install aliyun-python-sdk-nls-cloud-api -i https://pypi.org/simple
aliyun-python-sdk-imageprocess>=2.0.0
aliyun-python-sdk-ocr>=1.0.0

# 音频处理
gTTS>=2.5.0

# 其他多模态依赖
# 注意: librosa 0.10.0 和 opencv-python 4.9.0 可能需要 numpy < 1.24
# 对于 Python 3.10，如果需要 numpy 1.26+，请测试兼容性
# 当前限制为 < 1.24 以确保与 librosa/opencv 兼容
numpy>=1.21.0,<1.24.0
jieba>=0.42.1

# 其他必要依赖
beautifulsoup4>=4.9.0
PyPDF2>=2.0.0
feedparser>=5.2.0

# 额外依赖
typing-extensions>=4.0.0
